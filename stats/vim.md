# Немного о Vim

---

<p align="center"><img src="pic/vim-preview.png"></p>

## Прелюдия

Доброго времени суток! В данной статье хотел бы написать об основных командах текстового редактора Vim, о которых некоторые начинающие пользователи могли не знать. Заранее предупреждаю о том, что здесь я не буду упоминать основы Vim вроде обзора его режимов, приводить информацию о переключении между ними, выходе, сохранении файлов и пр., а приведу те команды и возможности, которыми я пользуюсь наиболее часто.

## Для кого эта заметка?

Это небольшая заметка, которая периодически поправляется и дополняется. Она **не** предназначена для начинающего пользователя, который никогда не видел Vim, она предназначена для более опытного.

## Содержание

[TOC]

## Введение

Vim - это продвинутый текстовый редактор, обладающий большим числом возможностей. За счёт несколько режимов работы этот текстовый редактор позволяет повысить продуктивность. Конечно, реальное повышение продуктивности можно заметить тогда, когда освоить этот редактор и настроить его для своих нужд, а также применять необходимые его возможности и функции на практике. Vim - выбор профессионалов, которым важны не рюшечки и красота, а удобство и функциональность.

## Форматирование содержимого файла

- Установка максимальной длины строки: `:set textwidth=кол-во_символов`
- Форматирование строк по центру: `:{диапазон}center ширина`
- Форматирование строк по правому краю: `:{диапазон}right ширина`
- Форматирование строк по левому краю: `:{диапазон}left ширина`

Например:

```vim
:1,3center 80
```

Команда выше отформатирует строки с первой по третью по центру. Максимальная длина строки равна 80 символам.

## Окна и вкладки

- Создание горизонтального окна: `:sp` или `:split`
- Создание вертикального окна: `:vsp` или `:vsplit`
- Увеличение ширины текущего (активного) окна: `C-w >`
- Уменьшение ширины текущего окна: `C-w <`
- Увеличение высоты текущего окна: `C-w +`
- Уменьшение высоты текущего окна: `C-w -`
- Закрытие активного окна: `C-w q` или `:q` (а также `:q!`, `:wq`...)
- Перемещение окон в прямом направлении: `C-w r`
- Перемещение окон в обратном направлении: `C-w R`
- Перейти на окно вниз/влево/вправо/вверх: `C-w h/j/k/l`
- Перемещение текущего окна вниз/влево/вправо/вверх: `C-w H/J/K/L`
- Открытие новой вкладки: `:tabnew`
- Открытие файлов по шаблону во вкладках: `:tabf file*` (`file*` - какой-то шаблон)
- Перемещение по вкладкам:

| В прямом направлении | В обратном направлении |
|----------------------|------------------------|
| `:tabn`              | `:tabp`                |
| `gt`                 | `gT`                   |

- Перемещение на первую вкладку: `:tabfirst` или `:tabfir`
- Перемещение на последнюю вкладку: `:tablast`

```vim
:tabnew src/api/cp_default.py
:sp src/api/cp_info.py
:vsp src/conf/port.ini

:tabfir
```

## Копирование/вставка

- Переход в визуальный режим: `v`
- Переход в режим визуальной строки: `V`
- Переход в режим визуального блока: `C-v`
- Выделение символов/строк/блоков: h, j, k, l или клавиши со стрелками

| Команда/режим/клавиша/etc | Объяснение |
|---------------------------|------------|
| `v`   | Выделение символов             |
| `V`   | Выделение строк                |
| `C-v` | Блочное выделение              |

- Копирование выбранного текста: `y`
- Вставка скопированного текста после курсора: `p`
- Вставка скопированного текста перед курсором: `P`

## Поиск и замена

- Поиск в прямом направлении: `/{шаблон}`
- Поиск в обратном направлении: `?{шаблон}`

### Замена только первого найденного вхождения:

- Поиск и замена (глобальная область поиска)[^2]: `:%s/{старые символы}/{новые символы}/`
- Поиск и замена (диапазон строк)[^2]: `:%s/{старые символы}/{новые символы}/`

### Замена всех найденных вхождений (глобальная замена):

- "Глобальная" замена: `:%s/{старые символы}/{новые символы}/g`
- "Глобальная" замена с подтверждением: `:%s/{старые символы}/{новые символы}/gc`

## Примечания

[^1] - здесь `C` означает клавишу <kbd>Ctrl</kbd>

[^2] - `{старые символы}` - слово или какой-либо другой текст, которые впоследствии будет заменён на `{новые символы}`. Ввод фигурных скобок ({}) здесь не требуется, во всех примерах (и в форматировании, и в поиске и замене) они предназначены для повышения читабельности.
